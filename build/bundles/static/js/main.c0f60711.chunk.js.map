{"version":3,"sources":["main/node_degree_calculation.js","main/graph.js","main/main.js","common.js","main/main_layout.js","main/landing_page.js","main/network_exploration.js","main/essay.js","main/essay_sterling.js","main/essay_research_directors.js","main/team.js","index.js"],"names":["update_node_degree_and_visibility","data","config","center_node_name","viz_degree","nodes","forEach","d","degree","visibility","links","source","name","target","update_node_visibility","center_names","_objectSpread","undefined","sort","a","b","update_node_degree","selected_viz_degree","create_graph","el","handle_viz_events","height","window","innerHeight","width","document","getElementById","element_for_graph_sizing","clientWidth","svg","d3","append","attr","selectAll","enter","clusters","Object","values","concat","data_bindings","force_simulation","max_docs","docs","node_size_scale","domain","range","link_strength_scale","center_draw","force","x","get_gravity_center","strength","y","cluster","id","radius","Math","sqrt","length","PI","alphaDecay","velocityDecay","on","render_simulation","initialize_force_sim","node_size_scale_degree_1","node_size_scale_degree_2","circle_radius","color","text","style","_","i","n","parentNode","node","getBBox","y_pos","x_pos","call","fx","fy","_i","tick","each","vx","vy","cluster_nodes","max","min","cluster_centers","push","link_width_scale_degree_1","link_width_scale_degree_2","update_graph","action","transition","duration","Controls","props","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","search_string","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","toLowerCase","handle_searchbar_search_and_focus_grpah","err","return","reason","handle_searchbar_clear_and_unfocus_graph","validate_searchbar_input_and_maybe_search","update_searchbar_value","_this","dataset_selector","show_dataset_selector","react_default","createElement","className","dataset_name","onChange","e","update_dataset","Autocomplete","freeSolo","options","data_names","map","option","renderInput","params","TextField","assign","placeholder","margin","variant","fullWidth","searchbar_value","inputValue","autoComplete","forcePopupIcon","_event","onInputChange","autocomplete_change","onClick","toggle_show_table","index_es","icon","faInfoCircle","React","Component","Viz","_this2","_graphRoot","createRef","current","viz_update_func","innerHTML","update_func","main_objectSpread","ref","Info","type","aria-label","aria-hidden","scope","person","affiliation","MainView","_this3","submitFormHandler","event","preventDefault","state","person_to_highlight","selection_active","selection_name","mouseover_active","show_info_panel","person_to_display_info","mouseover","csrftoken","cookieValue","cookie","cookies","split","trim","substring","decodeURIComponent","getCookie","_this4","setState","load_dataset","person_to_focus","people","get_person_data","center_names_backup","event_name","console","log","dataset","encodeURIComponent","fetch","then","response","json","_this5","catch","_this6","main_Controls","main_Viz","key","main_Info","currentColor","NavigationBar","href","data-toggle","data-target","aria-controls","aria-expanded","Footer","src","alt","MainLayout","_React$Component3","apply","arguments","inherits","createClass","Fragment","main_layout_NavigationBar","content","main_layout_Footer","NavSelector","url","img_url","title","description","LandingView","_React$Component2","role","landing_page_NavSelector","main_main_layout","NetworkExplorationView","_React$Component","main_main","EssayView","epigraph","author","subtitle","essay_header","authors","introduction","essay_content","EssaySideNote","sidenote_content","htmlFor","SterlingEssayView","essay_EssaySideNote","essay_EssayView","ResearchDirectorsEssayView","cite","AboutView","render_team_member","img_src","render_staff","position","render_staff_lower","app_modules","ReactDOM"],"mappings":"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","file":"static/js/main.c0f60711.chunk.js","sourcesContent":["export function update_node_degree_and_visibility(data, config, center_node_name) {\r\n    if (center_node_name === undefined){\r\n        data\r\n    }\r\n\r\n\r\n    data = update_node_degree(data, center_node_name);\r\n    data = update_node_visibility(data, config.selected_viz_degree, center_node_name);\r\n\r\n\r\n    return data\r\n\r\n}\r\n\r\n\r\n\r\nfunction update_node_degree(data, center_node_name){\r\n\r\n    let center_names = {... data.center_names};\r\n    if (center_node_name !== undefined){\r\n        center_names[center_node_name] = true\r\n    }\r\n\r\n    // first, set all degrees to 2\r\n    data.nodes.forEach((d) => {\r\n        d.degree = 2;\r\n    });\r\n    data.links.forEach((d) => {\r\n        d.degree = 3;\r\n    });\r\n\r\n    data.links.forEach((d) => {\r\n        if (d.source.name in center_names) {\r\n            d.degree = 2;\r\n            d.source.degree = 1;\r\n            if (d.target.name in center_names) {\r\n                d.target.degree = 1;\r\n                d.degree = 1;\r\n            }\r\n        } else if (d.target.name in center_names) {\r\n            d.target.degree = 1;\r\n            d.degree = 2;\r\n        }\r\n\r\n        if (d.source.name === center_node_name || d.target.name === center_node_name){\r\n            d.degree = 1;\r\n        }\r\n    });\r\n\r\n    data.links.sort((a, b) => a.degree - b.degree);\r\n\r\n    // if (center_node_name !== undefined) {\r\n    //     data.links.forEach((d) => {\r\n    //         if (d.source.name !== center_node_name && d.target.name !== center_node_name) {\r\n    //             d.degree = -1;\r\n    //             d.source.degree = -1;\r\n    //             d.target.degree = -1;\r\n    //         }\r\n    //     });\r\n    // }\r\n\r\n    //TODO: Handle visibility separate from degree\r\n\r\n    return data\r\n}\r\n\r\nfunction update_node_visibility(data, viz_degree, center_node_name){\r\n\r\n\r\n    data.nodes.forEach((d) => {\r\n\r\n        if (d.degree <= 1){\r\n            d.visibility = 'visible'\r\n        } else {\r\n            d.visibility = 'hidden'\r\n        }\r\n    });\r\n    data.links.forEach((d) => {\r\n        if (d.degree <= viz_degree * 2){\r\n            d.visibility = 'visible'\r\n        } else {\r\n            d.visibility = 'hidden'\r\n        }\r\n\r\n        if (d.source.name === center_node_name || d.target.name === center_node_name){\r\n            d.source.visibility = 'visible';\r\n            d.target.visibility = 'visible';\r\n        }\r\n    });\r\n\r\n    return data\r\n\r\n}\r\n","/**\r\n * Graph code mostly in D3.js for the visualization\r\n */\r\nimport * as d3 from 'd3';\r\nimport './graph.css';\r\n\r\nimport {update_node_degree_and_visibility} from \"./node_degree_calculation\";\r\n\r\n// D3 code is much more readable with non-standard indentation,\r\n// so turning off standard eslint indent rules just for this file\r\n/* eslint indent: 0 */\r\n\r\n/**\r\n * Create a graph using d3\r\n *\r\n * @param el: DOM element where we'll render the graph\r\n * @param data: Object, the data for the visualization\r\n *              keys: \"nodes\" and \"edges\", each with an array of values\r\n * @param config: config for the visualization like width and height\r\n * @param handle_viz_events: function to pass visualization events back to react.\r\n */\r\nexport function create_graph(el, data, config, handle_viz_events) {\r\n\r\n    // set width and height based on the element that we use for sizing\r\n    // that element needs to have been rendered by the time we get here.\r\n    config.height = window.innerHeight * .8;\r\n    config.width = document.getElementById(config.element_for_graph_sizing).clientWidth;\r\n\r\n\r\n    // Setup the SVG that we're going to draw the graph into\r\n    const svg = d3.select(el)\r\n        .append('svg')\r\n            .attr(\"width\", config.width)\r\n            .attr(\"height\", config.height)\r\n            .attr(\"id\", \"graph_svg\");\r\n\r\n    // to calculate node degrees and visibility, we need the data-bindings, so we're creating them\r\n    // here first, then we update the data with degree and visibility info, and then we use that\r\n    // info to set the attributes of the visualization\r\n\r\n    // Create links (they go to the background/bottom of the visualization\r\n    const links = svg\r\n        .append(\"g\")\r\n            .attr(\"id\", \"graph_links\")\r\n        .selectAll(\"line\")\r\n            .data(data.links)\r\n        .enter()\r\n            .append(\"line\");\r\n\r\n    // clusters are the affiliation groups, e.g. Philip Morris\r\n    // each consists of a group with one text element.\r\n    const clusters = svg\r\n        .append(\"g\")\r\n            .attr(\"id\", \"graph_clusters\")\r\n        .selectAll(\"g\")\r\n            .data(Object.values(data.clusters))\r\n        .enter()\r\n            .append(\"g\")\r\n                .attr(\"id\", (d) => `cluster_${d.name}`);\r\n\r\n    // node is an SVG g -- will contain circle + label (a group with a rect and a text element)\r\n    const nodes = svg\r\n        .append(\"g\")\r\n            .attr(\"id\", \"graph_nodes\")\r\n        .selectAll(\"g\")\r\n            .data(data.nodes)\r\n        .enter()\r\n            .append(\"g\")\r\n            .attr(\"class\", \"graph_node\")\r\n            .attr('id', (d) => d.name);  // TODO: replace this with a fixed key rather than name\r\n\r\n    // store data bindings and initialize force simulation\r\n    let data_bindings = {\r\n        'svg': svg,\r\n        'nodes': nodes,\r\n        'links': links,\r\n        'clusters': clusters\r\n    };\r\n\r\n    // initializing the force simulation connects the links and edges, i.e. we can modify\r\n    // node data through the links\r\n    // before this step, link.source/target is a string.\r\n    // after this step, it's a node and we can access its attributes e.g. with node.degree\r\n    // This creates the x and y values for the data, based on relationships here\r\n    // n.b. this doesn't actually render the sim - we do that below\r\n    // by adding nodes to the svg and updating their position in render_simulation\r\n    let force_simulation = initialize_force_sim(config, data, data_bindings);\r\n\r\n    // with the databindings in place, we now update which nodes and edges should be visible\r\n    update_node_degree_and_visibility(data, config);\r\n\r\n\r\n    // add node circle and labels\r\n    const max_docs = d3.max(data['nodes'], function(d) { return d.docs; });\r\n    const node_size_scale_degree_1 = d3.scaleLinear()\r\n        .domain([0, max_docs])\r\n        .range([20, 30]);\r\n    const node_size_scale_degree_2 = d3.scaleLinear()\r\n        .domain([0, max_docs])\r\n        .range([5, 30]);\r\n\r\n    // SR: ok. here's something stupid: each node consists of 4 element:\r\n    // - a background rect with stroke to outline the label\r\n    // - a circle for the node (with stroke)\r\n    // - a foreground rect, exactly like the background rect, except no stroke\r\n    // - a text element with the name\r\n    // the foreground rect is there so the stroke from the circle that would overlap with the text\r\n    // is hidden.\r\n\r\n    // add background rectangle (which will have a stroke)\r\n    nodes\r\n        .append('rect')\r\n            .attr('class', 'node_label_rect_background')\r\n            .attr('visibility', (d) => d.visibility );\r\n\r\n    nodes.append(\"circle\")\r\n        .attr(\"r\", (d) => {\r\n            let circle_radius;\r\n            if (d.degree === 1){\r\n                circle_radius = node_size_scale_degree_1(d.docs)\r\n            } else {\r\n                circle_radius = node_size_scale_degree_2(d.docs)\r\n            }\r\n            d.circle_radius = circle_radius;\r\n            return circle_radius;\r\n        })\r\n        // set initial x and y to the center of the clusters\r\n        .attr(\"x\", (d) => data.clusters[d.cluster]['x_pos'])\r\n        .attr(\"y\", (d) => data.clusters[d.cluster]['y_pos'])\r\n        .attr('class', (d) => `node degree_${d.degree}` )\r\n        .attr('fill', (d) =>{\r\n            if (d.degree === 1){\r\n                return d3.interpolateLab('white', data.clusters[d.cluster].color)(0.3)\r\n            } else {\r\n                return data.clusters[d.cluster].color\r\n            }\r\n        })\r\n        .attr('stroke', (d) => {\r\n            if (d.degree === 1){\r\n                return data.clusters[d.cluster].color\r\n            } else {\r\n                return '#f2f2f3'\r\n            }\r\n        });\r\n\r\n    // foreground rectangle for the label without stroke\r\n    nodes\r\n        .append('rect')\r\n            .attr('class', 'node_label_rect_foreground')\r\n            .attr('visibility', (d) => d.visibility );\r\n\r\n    // node label\r\n    nodes\r\n        .append(\"text\")\r\n            .text((d) => d.name)\r\n            .style(\"fill\", \"#555\")\r\n            .style(\"font-family\", \"Arial\")\r\n            .style(\"font-size\", 12)\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr('alignment-baseline', 'central')\r\n            .attr('transform', (d) => {\r\n                if (d.degree === 1) {\r\n                    return 'translate(0, 0)'\r\n                } else {\r\n                    return 'translate(0, -20)'\r\n                }\r\n            })\r\n            // .attr(\"transform\", (d, i, n) => calc_label_pos(d, i, n))\r\n            .style(\"pointer-events\", \"none\")\r\n            .attr('visibility', (d) => d.visibility );\r\n\r\n    // place and size of the rectangles\r\n    nodes.selectAll('rect')\r\n        .attr('rx', 3)  //rounded corners\r\n        .attr('ry', 3)  //rounded corners\r\n        .attr('x', (_, i, n) => {\r\n            // select the parent of the i-th node, which is the parent node group\r\n            // with thanks to Crista, Ife, and Jordan for figuring out the BBox\r\n            const parent_node_group = d3.select(n[i].parentNode);\r\n            // then, get the bounding box of the text child element\r\n            // TODO: figure out a better way of getting the bbox.\r\n            const text_bbox = parent_node_group.selectAll('text').node().getBBox();\r\n            return text_bbox.x - 2\r\n        })\r\n        .attr('y', (d, i, n) => {\r\n            // now as an ugly oneliner\r\n            let y_pos = d3.select(n[i].parentNode).selectAll('text').node().getBBox().y - 2;\r\n            // 2nd degree labels should be above the node, not on the node\r\n            if (d.degree !== 1){\r\n                y_pos -= 20\r\n            }\r\n            return y_pos\r\n        })\r\n        .attr('width', (_, i, n) => {\r\n            // now as an ugly oneliner\r\n            return d3.select(n[i].parentNode).selectAll('text').node().getBBox().width + 4\r\n        })\r\n        .attr('height', (_, i, n) => {\r\n            // now as an ugly oneliner\r\n            return d3.select(n[i].parentNode).selectAll('text').node().getBBox().height + 4\r\n        })\r\n\r\n        .attr('fill', (d) => d3.interpolateLab('white', data.clusters[d.cluster].color)(0.3));\r\n\r\n    nodes.selectAll('.node_label_rect_background')\r\n        .attr('stroke', (d) => data.clusters[d.cluster].color);\r\n\r\n\r\n    clusters.append('text')\r\n        .text((d) => d.name)\r\n        .style('fill', (d) => d.color)\r\n        .style('font-size', (config.width - 50) * config.height / 50000 )\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", (d) => (d.x_pos + 0.2) * config.width / 3 * 2)\r\n        .attr(\"y\", (d) => (d.y_pos + 0.2) * config.height / 3 * 2);\r\n\r\n\r\n    handle_viz_events('update_data_bindings', data_bindings);\r\n\r\n    nodes  // bind event handlers for nodes\r\n        .call(\r\n            d3.drag()\r\n                .on(\"start\", (d) => {\r\n                    data_bindings.nodes.on(\"mouseover\", () => {}).on(\"mouseout\", () => {});\r\n                    d.fx = d.x;\r\n                    d.fy = d.y;\r\n                })\r\n                .on(\"drag\", (d) => {\r\n                    d.x = d3.event.x;\r\n                    d.y = d3.event.y;\r\n                    render_simulation(config, data, data_bindings);\r\n                })\r\n                .on(\"end\", (d) => {\r\n                    d.x = d3.event.x;\r\n                    d.y = d3.event.y;\r\n                    render_simulation(config, data, data_bindings);\r\n                    data_bindings.nodes\r\n                        .on(\"mouseover\", (d) => handle_viz_events('mouseover', d))\r\n                        .on(\"mouseout\", (d) => handle_viz_events('mouseout', d))\r\n                })\r\n        )\r\n        .on(\"mouseover\", (d) => handle_viz_events('mouseover', d))\r\n        .on(\"mouseout\", (d) => handle_viz_events('mouseout', d))\r\n        .on(\"click\", (d, _i) => handle_viz_events('click', d));\r\n\r\n\r\n\r\n\r\n\r\n    // run 400 ticks before displaying the result. That way, the simulation is mostly settled\r\n    // but still slightly moving.\r\n    for (let i = 0; i < 400; i++){\r\n        force_simulation.tick(1);\r\n\r\n        // SR: I don't know why x/y/vx/vy sometimes get into the millions.\r\n        // These extreme values lead to page freezes. By capping these attributes, the freezes\r\n        // can be prevented.\r\n        data_bindings.nodes.each((d) => {\r\n            if (d.vx > 1000){\r\n                d.vx = 1000\r\n            } else if (d.vx < -1000){\r\n                d.vx = -1000\r\n            }\r\n            if (d.vy > 1000){\r\n                d.vy = 1000\r\n            } else if (d.vy < -1000){\r\n                d.vy = -1000\r\n            }\r\n            if (d.x > 3000) {\r\n                d.x = 3000\r\n            } else if (d.x < -3000) {\r\n                d.x = -3000\r\n            }\r\n            if (d.y > 3000){\r\n                d.y = 3000\r\n            } else if (d.y < -3000){\r\n                d.y = -3000\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n//\r\n// function force_sim(config,data) {\r\n//     const force_x_pos = (d) => {\r\n//         if (d.has_been_dragged) {\r\n//             return d.x_grav;\r\n//         } else {\r\n//             return get_gravity_center(d, config, data)[0];\r\n//         }\r\n//     };\r\n//     const force_y_pos = (d) => {\r\n//         if (d.has_been_dragged) {\r\n//             return d.y_grav;\r\n//         } else {\r\n//             return get_gravity_center(d, config, data)[1];\r\n//         }\r\n//     };\r\n//     const cluster_strength = (d) => {\r\n//         if (d.has_been_dragged){\r\n//             return 3;\r\n//         } else {\r\n//             return 1;\r\n//         }\r\n//     };\r\n//\r\n//     let force_simulation = d3.forceSimulation(data.nodes);\r\n//     force_simulation\r\n//         .force(\"charge\", d3.forceManyBody())\r\n//         .force('collision', d3.forceCollide().radius(30))\r\n//         .force('x', d3.forceX()\r\n//             .x((d) => force_x_pos(d))\r\n//             .strength(cluster_strength)\r\n//         )\r\n//         .force('y', d3.forceY().y((d) => force_y_pos(d)).strength(cluster_strength))\r\n//         .force('center', d3.forceCenter(config.width / 2, config.height / 2).strength(2000))\r\n//         .on(\"tick\", () => render_simulation(config, data));  // what to do when the sim updates\r\n//     }\r\n\r\nfunction get_gravity_center(d, config, data){\r\n\r\n    // if clustering inactive -> all nodes in the center of the graph\r\n    if (!config.cluster_nodes){\r\n        return [config.width / 2, config.height /2]\r\n    } else {\r\n        const x_pos = (data.clusters[d.cluster]['x_pos'] + 0.2) * config.width / 3 * 2;\r\n        const y_pos = (data.clusters[d.cluster]['y_pos'] + 0.2) * config.height / 3 * 2;\r\n        return [x_pos, y_pos]\r\n    }\r\n}\r\n\r\n/*\r\n * Event handlers\r\n */\r\n// Update the position of all svg elements according to the force sim\r\n// This function is called whenever the simulation updates\r\n// eslint-disable-next-line no-unused-vars\r\nfunction render_simulation(config, data, data_bindings) {\r\n    // Update node positions\r\n    data_bindings.nodes.attr(\"transform\", (d) => {\r\n        d.x = Math.max(d.circle_radius, Math.min(config.width - d.circle_radius, d.x));\r\n        d.y = Math.max(d.circle_radius, Math.min(config.height - d.circle_radius, d.y));\r\n        return `translate(${d.x}, ${d.y})`\r\n    } );\r\n\r\n    // Update link positions\r\n    data_bindings.links\r\n        .attr(\"x1\", (d) => d.source.x)\r\n        .attr(\"y1\", (d) => d.source.y)\r\n        .attr(\"x2\", (d) => d.target.x)\r\n        .attr(\"y2\", (d) => d.target.y);\r\n\r\n    // the annoying part: reset the cluster labels to the center of each cluster\r\n    // (the clusters move with the layout -> they change after a few seconds of applied force)\r\n\r\n    // first, add current x and y values for each node to a dict with the clusters\r\n    let cluster_centers = {};\r\n    data_bindings.nodes.each((d) => {\r\n        if (!(d.cluster in cluster_centers)){\r\n            cluster_centers[d.cluster] = {\r\n                'x_pos': [],\r\n                'y_pos': []\r\n            }\r\n        }\r\n        cluster_centers[d.cluster]['x_pos'].push(d.x);\r\n        cluster_centers[d.cluster]['y_pos'].push(d.y);\r\n    });\r\n\r\n\r\n    // then calculate the center of each cluster and move the text to the new center\r\n    data_bindings.clusters.selectAll('text')\r\n        .attr('x', (d) => {\r\n            return d3.mean(cluster_centers[d.id]['x_pos'])\r\n        })\r\n        .attr('y', (d) => d3.mean(cluster_centers[d.id]['y_pos']));\r\n\r\n    const link_width_scale_degree_1 = d3.scaleLinear()\r\n        .domain([0, d3.max(data['links'], function(d) { return d.docs})])\r\n        .range([2, 3]);\r\n    const link_width_scale_degree_2 = d3.scaleLinear()\r\n        .domain([0, d3.max(data['links'], function(d) { return d.docs})])\r\n        .range([0.5, 2]);\r\n\r\n    data_bindings.links\r\n        .attr(\"class\", (d) => `graph_link degree_${d.degree}`)\r\n        .attr(\"stroke-width\", (d) => {\r\n            if (d.degree === 1){\r\n                return link_width_scale_degree_1(d.docs);\r\n            } else {\r\n                return link_width_scale_degree_2(d.docs);\r\n            }\r\n        })\r\n        .attr('visibility', (d) => d.visibility);\r\n\r\n    data_bindings.nodes.selectAll('rect,text')\r\n        .attr('visibility', (d) => d.visibility );\r\n\r\n}\r\n\r\nfunction initialize_force_sim(config, data, data_bindings) {\r\n\r\n    //re-init from graph initialization because it somehow didn't get to this function\r\n    const max_docs = d3.max(data['nodes'], function(d) { return d.docs; });\r\n    const node_size_scale = d3.scaleLinear()\r\n        .domain([0, max_docs])\r\n        .range([5, config.width * config.height / 80000]);\r\n\r\n    const force_x_pos = (d) => {\r\n        return get_gravity_center(d, config, data)[0];\r\n    };\r\n    const force_y_pos = (d) => {\r\n        return get_gravity_center(d, config, data)[1];\r\n    };\r\n\r\n    const cluster_strength = 5;\r\n\r\n    const link_strength_scale = d3.scaleLinear()\r\n        .domain([0, d3.max(data['links'], function(d) { return d.docs})])\r\n        .range([0, 5]);\r\n\r\n    const center_draw = d3.scaleLinear()\r\n        .domain([0, max_docs])\r\n        .range([0, 10]);\r\n\r\n\r\n\r\n    let force_simulation = d3.forceSimulation(data.nodes);\r\n    force_simulation\r\n        .force('x', d3.forceX()\r\n                        .x(force_x_pos)\r\n                        .strength(cluster_strength))\r\n        .force('y', d3.forceY()\r\n                        .y(force_y_pos)\r\n                        .strength(cluster_strength))\r\n\r\n        //.force(\"center\", d3.forceCenter().x(config.width / 2).y(config.height / 2))\r\n\r\n        .force('x_center', d3.forceX()\r\n                        .x(config.width/2)\r\n                        .strength((d) => center_draw(d.docs))\r\n        )\r\n        .force('y_center', d3.forceY()\r\n                        .y(config.height/2)\r\n                        .strength((d) => center_draw(d.docs))\r\n        )\r\n\r\n        // the most central nodes should be dragged towards the center\r\n        // one way of accomplishing this is to have an attraction between nodes based on the\r\n        // number of documents that they have exchanged IF they are in different clusters\r\n        .force(\"links\",\r\n            d3.forceLink(data.links)\r\n                .strength(function (d) {\r\n                    if (d.source.cluster === d.target.cluster){\r\n                        return link_strength_scale(d.docs) / 5000\r\n                    } else {\r\n                        return link_strength_scale(d.docs)\r\n                    }\r\n                })\r\n                .id((d) => d.name)  // which data field to use as id for links\r\n        )\r\n\r\n        .force('avoid_node_collisions', d3.forceCollide()\r\n            .radius((d) => {\r\n                // make sure that at least 50% of the svg space is unoccupied by nodes\r\n                // each node takes up PI * r^2\r\n                // -> PI * r^2 * no_nodes * 2 < height * width\r\n                return d3.min([\r\n                    node_size_scale(d.docs) + 30,\r\n                    Math.sqrt(config.width * config.height / data.nodes.length / Math.PI / 2)\r\n                    ])\r\n            })\r\n        )\r\n        // how fast energy in the system should decay. Default: 0.0228\r\n        .alphaDecay(0.01)\r\n        // basically a friction parameter. Default: 0.4\r\n        .velocityDecay(0.8)\r\n        .on(\"tick\",() => {\r\n            return render_simulation(config, data, data_bindings)\r\n        });  // what to do when the sim updates\r\n\r\n    return force_simulation;\r\n}\r\n\r\n// TODO: Re-implement clustering\r\n// function change_clusters(config, data) {\r\n//     force_sim(config,data);\r\n//     function resize() {\r\n//         const svg = d3.select(\"#graph_svg\");\r\n//         console.log(\"RESIZING\", config.width, config.height);\r\n//         const width = window.innerWidth;\r\n//         const height = window.innerHeight;\r\n//         svg.attr(\"width\", width).attr(\"height\", height);\r\n//         config.width = width;\r\n//         config.height = height;\r\n//         let force_simulation = initialize_force_sim(config, data);\r\n//         force_simulation.alphaTarget(0.3).restart();\r\n//         force_simulation.alphaTarget(0);\r\n//     }\r\n//     d3.select(window).on(\"resize\", resize);\r\n\r\n    // let force_simulation = d3.forceSimulation(data.nodes);\r\n\r\n    // const all_graph_nodes = d3.select(\"#graph_nodes\");\r\n    // const nodes = all_graph_nodes.selectAll('g');\r\n\r\n    // const all_graph_links = d3.select(\"#graph_links\");\r\n    // const links = all_graph_links.selectAll('line');\r\n    // nodes  // bind event handlers for nodes\r\n    //     .call(\r\n    //         d3.drag()\r\n    //             .on(\"start\", (d) => drag_started(d,nodes,force_simulation))\r\n    //             .on(\"drag\", (d) => dragged(d))\r\n    //             .on(\"end\", (d) => drag_ended(d,config,data,nodes,links,force_simulation))\r\n    //     )\r\n// }\r\n\r\n\r\n/**\r\n * Returns information of the given id\r\n *\r\n * @param data: data\r\n * @param name: String\r\n */\r\n// TODO: Display information somewhere\r\nexport function get_information(data, name){\r\n    name = name.toUpperCase();\r\n    const data_nodes = data[\"nodes\"];\r\n    let name_info = {};\r\n    for(const indx in data_nodes){\r\n        const current_name = data_nodes[indx];\r\n        if (current_name[\"name\"]  === name){\r\n            name_info = current_name;\r\n        }\r\n    }\r\n\r\n    return name_info;\r\n}\r\n\r\n/**\r\n * Updates visualization according to what the user searches\r\n *\r\n * @param el: the html element to which the graph is bound\r\n * @param data: data\r\n * @param config: the graph config from react\r\n * @param action: the update action, e.g. \"focus\" or \"cluster_nodes\"\r\n */\r\nexport function update_graph(el, data, config, data_bindings, action) {\r\n\r\n\r\n    if (action === 'update_focus') {\r\n\r\n        const link_width_scale_degree_1 = d3.scaleLinear()\r\n            .domain([0, d3.max(data['links'], function(d) { return d.docs})])\r\n            .range([2, 3]);\r\n        const link_width_scale_degree_2 = d3.scaleLinear()\r\n            .domain([0, d3.max(data['links'], function(d) { return d.docs})])\r\n            .range([0.5, 2]);\r\n        data_bindings.links.transition('link_strokes').duration(1000)\r\n            .attr(\"stroke-width\", (d) => {\r\n                if (d.degree === 1){\r\n                    return link_width_scale_degree_1(d.docs);\r\n                } else {\r\n                    return link_width_scale_degree_2(d.docs);\r\n                }\r\n            });\r\n        data_bindings.links\r\n            .attr(\"class\", (d) => `graph_link degree_${d.degree}`);\r\n\r\n        data_bindings.nodes.selectAll('rect,text').transition('node_labels').duration(1000)\r\n            .attr('visibility', (d) => d.visibility );\r\n\r\n    // TODO: re-implement Clustering\r\n    // } else if (action === \"cluster_nodes\") {\r\n    //     // initialize_force_sim(config, data);\r\n    //     change_clusters(config, data);\r\n    } else {\r\n        //function update_unfocus_node (el, data, config) {\r\n        const svg = d3.select(el);\r\n        svg.selectAll(\".graph_node\").style(\"opacity\", 1);\r\n        svg.selectAll(\".graph_link\").style(\"opacity\", 1);\r\n    }\r\n    render_simulation(config, data, data_bindings);\r\n}\r\n\r\n\r\n","/**\r\n * UI Code for the visualization\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { TextField } from '@material-ui/core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { getCookie } from '../common'\r\nimport * as d3 from 'd3';\r\nimport { create_graph, update_graph} from './graph.js'\r\nimport {update_node_degree_and_visibility} from \"./node_degree_calculation\";\r\nimport './main.css';\r\n\r\n/***************************************************************************************************\r\n * Controls\r\n * The top row of the webapp, with search bar, display controls, etc.\r\n **************************************************************************************************/\r\nclass Controls extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    validate_searchbar_input_and_maybe_search(search_string) {\r\n        // Check if the person we're searching for actually exists\r\n        const nodes = this.props.nodes;\r\n        for (const node of nodes) {\r\n            const name = node.name;\r\n\r\n            if (search_string.toLowerCase() === name.toLowerCase()) {\r\n                this.props.handle_searchbar_search_and_focus_grpah(name);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    autocomplete_change(value, reason) {\r\n        if (reason === \"clear\") {\r\n            this.props.handle_searchbar_clear_and_unfocus_graph();\r\n        } else {\r\n\r\n            if (value !== null) {\r\n                this.validate_searchbar_input_and_maybe_search(value);\r\n                this.props.update_searchbar_value(value);\r\n            } else {\r\n                this.validate_searchbar_input_and_maybe_search(\"\");\r\n                this.props.update_searchbar_value(\"\");\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let dataset_selector = null;\r\n        if (this.props.show_dataset_selector){\r\n            dataset_selector =\r\n                <div id=\"middle_controls\" className=\"col-4\">\r\n                    <div className=\"form-group\">\r\n                        <select className=\"form-control float-left\"\r\n                            value={this.props.dataset_name}\r\n                            onChange={(e) => this.props.update_dataset(e.target.value)}\r\n                        >\r\n                            <option value=\"lawyers\">Lawyers</option>\r\n                            <option value=\"research_directors\">Research Directors</option>\r\n                            <option value=\"sterling\">Theodor Sterling</option>\r\n                        </select>\r\n                    </div>\r\n                </div>;\r\n        }\r\n\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-4\">\r\n                    <Autocomplete\r\n                        id=\"free-solo-demo\"\r\n                        freeSolo={true}\r\n                        options={this.props.data_names.map(option => option.name)}\r\n                        renderInput={params => (\r\n                            <TextField {...params}\r\n                                placeholder=\"Type a name here\"\r\n                                //maxLength=\"20\" size=\"20\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\" fullWidth\r\n                                value={this.props.searchbar_value}\r\n                                onChange={(e) => this.props.update_searchbar_value(e.target.value)}\r\n                            />\r\n                        )}\r\n                        inputValue = {this.props.searchbar_value}\r\n                        autoComplete={true}\r\n                        forcePopupIcon={false}\r\n                        onChange={(_event, value) => this.props.update_searchbar_value(value)}\r\n                        onInputChange={(_event, value, reason) =>\r\n                            this.autocomplete_change(value, reason)}\r\n                    />\r\n                </div>\r\n\r\n                {dataset_selector}\r\n\r\n                <div className=\"col-4\">\r\n                    <div id=\"info_button\">\r\n                        <a onClick={this.props.toggle_show_table}>\r\n                            <FontAwesomeIcon icon={faInfoCircle} />\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nControls.propTypes = {\r\n    searchbar_value: PropTypes.string.isRequired,\r\n    toggle_show_table: PropTypes.func,\r\n    handle_searchbar_search_and_focus_grpah: PropTypes.func.isRequired,\r\n    handle_searchbar_clear_and_unfocus_graph: PropTypes.func.isRequired,\r\n    update_searchbar_value: PropTypes.func.isRequired,\r\n    handle_viz_events: PropTypes.func.isRequired,\r\n    nodes: PropTypes.array.isRequired,\r\n    dataset_name: PropTypes.string.isRequired,\r\n    update_dataset: PropTypes.func.isRequired,\r\n    data_names: PropTypes.array,\r\n    show_dataset_selector: PropTypes.bool\r\n};\r\n\r\n/***************************************************************************************************\r\n * Wrapper for the Visualization\r\n **************************************************************************************************/\r\nclass Viz extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._graphRoot = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        // D3 Code to create the chart\r\n        create_graph(\r\n            this._graphRoot.current,  // current gives the DOM object (as opposed to the React ref)\r\n            this.props.data,\r\n            this.props.config,\r\n            this.props.handle_viz_events,\r\n        );\r\n        window.d3 = d3;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        // D3 Code to update the chart\r\n        if (this.props.config.viz_update_func === undefined) {\r\n            return;\r\n        }\r\n\r\n        if (this.props.config.viz_update_func === 'create_graph') {\r\n            document.getElementById('graph_root').innerHTML = '';\r\n            create_graph(this._graphRoot.current, this.props.data, this.props.config,\r\n                this.props.handle_viz_events);\r\n            return\r\n        }\r\n\r\n        let update_func, action;\r\n        if (this.props.config.viz_update_func === 'cluster_nodes') {\r\n            update_func = update_graph;\r\n            action = 'cluster_nodes';\r\n        }\r\n        else if (this.props.config.viz_update_func === 'update_focus') {\r\n            update_func = update_graph;\r\n            action = 'update_focus';\r\n        }\r\n\r\n        update_func(\r\n            {... this._graphRoot.current},\r\n            {... this.props.data},\r\n            {... this.props.config},\r\n            {... this.props.data_bindings},\r\n            action,\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"col-12 p-0 m-0\" ref={this._graphRoot} id='graph_root'>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nViz.propTypes = {\r\n    data: PropTypes.object.isRequired,\r\n    config: PropTypes.object.isRequired,\r\n    data_bindings: PropTypes.object.isRequired,\r\n    handle_viz_events: PropTypes.func,\r\n};\r\n\r\n/**\r\n * Info panel - data from the visualization\r\n */\r\nclass Info extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"info_panel\">\r\n                <button onClick={this.props.toggle_show_table} type=\"button\"\r\n                    className=\"ml-2 mb-1 close\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n                <table className=\"table\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Name:</th>\r\n                            <td>{this.props.person.name.length > 0 ?\r\n                                this.props.person.name : \"\"}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Docs</th>\r\n                            <td>{this.props.person.docs > 0 ? this.props.person.docs : 0}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Affiliation</th>\r\n                            <td>{this.props.person.affiliation.length > 0 ?\r\n                                this.props.person.affiliation : \"\"}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nInfo.propTypes ={\r\n    mouseover: PropTypes.bool,\r\n    currentColor: PropTypes.string,\r\n    person: PropTypes.object,\r\n    toggle_show_table: PropTypes.func,\r\n};\r\n\r\n/***************************************************************************************************\r\n * Main component for the main view.\r\n **************************************************************************************************/\r\n\r\nclass MainView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            config: {\r\n                // width: window.innerWidth,\r\n                // height: window.innerHeight - 100,\r\n                // width: 1000,\r\n                // height: 600,\r\n                element_for_graph_sizing: this.props.element_for_graph_sizing,\r\n                person_to_highlight: \"\",\r\n                dataset_name: this.props.dataset_name,\r\n                cluster_nodes: true,\r\n                selection_active: false,\r\n                selection_name: undefined,\r\n                mouseover_active: false,\r\n                show_info_panel: false,\r\n                searchbar_value: \"\",\r\n                selected_viz_degree: 2,\r\n                person_to_display_info: {name: \"\", affiliation: \"\", docs: 0},\r\n                show_dataset_selector: this.props.show_dataset_selector\r\n            },  // initial configuration for the viz\r\n            data: null,  // data for the viz\r\n            data_bindings: {}, // data bindings for d3\r\n            mouseover: false,  // info panel state (based on callbacks from viz)\r\n\r\n        };\r\n        this.csrftoken = getCookie('csrftoken');\r\n\r\n    }\r\n\r\n    /**\r\n     * Runs when the MainView item is connected to the DOM.\r\n     */\r\n    componentDidMount() {\r\n        // let config = {... this.state.config};\r\n        // let dataset_name = this.state.config.dataset_name;\r\n        // if (this.props.dataset_name) {\r\n        //     config.dataset_name = this.props.dataset_name;\r\n        //     dataset_name = this.props.dataset_name;\r\n        // }\r\n        // if (this.props.show_dataset_selector){\r\n        //     config.show_dataset_selector = this.props.show_dataset_selector;\r\n        // }\r\n\r\n        let config = {... this.state.config};\r\n        if (!this.props.dataset_name){\r\n            config.dataset_name = 'research_directors';\r\n        }\r\n        if (this.props.show_dataset_selector===null){\r\n            config.show_dataset_selector = true;\r\n        }\r\n        this.setState({config}, () => {\r\n            this.load_dataset(this.state.config.dataset_name);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets the data of the person that we are searching for\r\n     * @param person_to_focus The name of the person to look for\r\n     * @returns an object that contains the required data to display\r\n     */\r\n    get_person_data(person_to_focus) {\r\n        const people = this.state.data.nodes;\r\n        for (let i = 0; i < people.length; i++) {\r\n            if (people[i].name === person_to_focus) {\r\n                return people[i];\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Takes the searchbar value and updates the graph to focus on that person\r\n     * The person to focus on has already been validated that they are in the\r\n     * graph by the validation function in Controls.\r\n     * @param person_to_focus The person we want the graph to focus on\r\n     */\r\n    handle_searchbar_search_and_focus_grpah(person_to_focus) {\r\n        let data = this.state.data;\r\n        const config = this.state.config;\r\n        // update center names to selected node\r\n        // turning the next two lines into a one-liner gives an error. unclear why.\r\n        data.center_names = {};\r\n        data.center_names[person_to_focus] = true;\r\n\r\n        config.selection_active = true;\r\n        config.selection_name = person_to_focus;\r\n        config.show_info_panel = true;\r\n        config.searchbar_value = person_to_focus;\r\n        config.viz_update_func = 'update_focus';\r\n        const person = this.get_person_data(person_to_focus);\r\n        config.person_to_display_info = person;\r\n        data = update_node_degree_and_visibility(data, config, person_to_focus);\r\n        this.setState({data: data, config: config});\r\n    }\r\n\r\n    /**\r\n     * Handles clearing the searchbar when the \"clear (x) button is clicked\r\n     * while also unfocuses the graph such that it returns to its original\r\n     * state.\r\n     */\r\n    handle_searchbar_clear_and_unfocus_graph() {\r\n\r\n        const config = this.state.config;\r\n        let data = this.state.data;\r\n        data.center_names = data.center_names_backup;\r\n        config.searchbar_value = \"\";\r\n        config.selection_active = false;\r\n        config.selection_name = undefined;\r\n        config.show_info_panel = false;\r\n        config.viz_update_func = 'update_focus';\r\n        data = update_node_degree_and_visibility(\r\n            data, config);\r\n        config.person_to_display_info = {name: \"\", affiliation: \"\", docs: 0};\r\n        this.setState({data: data, config: config});\r\n    }\r\n\r\n\r\n    /**\r\n     * Handles a visualization event\r\n     *\r\n     * @param event_name: String\r\n     * @param data: Object\r\n     */\r\n    handle_viz_events(event_name, data) {\r\n\r\n\r\n        if (event_name === 'update_data_bindings'){\r\n            if (!data === null) {\r\n                console.log(data.clusters === this.state.data_bindings.clusters);\r\n            }\r\n            this.setState({data_bindings: data});\r\n            return\r\n        }\r\n\r\n        // all other viz events use the data from a node -> rename\r\n        let config = {... this.state.config};\r\n        let node = data;\r\n        if (event_name === \"mouseover\") {\r\n            // if a selection is already active, don't change to mouseover target\r\n            if (!config.selection_active){\r\n                config.viz_update_func = 'update_focus';\r\n                const data = update_node_degree_and_visibility(\r\n                    {... this.state.data}, {... this.state.config}, node.name);\r\n                this.setState({data: data, config: config});\r\n            }\r\n\r\n        } else if (event_name === \"mouseout\") {\r\n\r\n            if (!config.selection_active){\r\n                config.viz_update_func = 'update_focus';\r\n                const data = update_node_degree_and_visibility(\r\n                    {... this.state.data}, {... this.state.config});\r\n                this.setState({data: data, config: config});\r\n            }\r\n\r\n        } else if (event_name === \"click\") {\r\n            // select new person\r\n            if (!config.selection_active || node.name !== this.state.config.selection_name){\r\n                this.handle_searchbar_search_and_focus_grpah(node.name);\r\n\r\n            } else {\r\n                this.handle_searchbar_clear_and_unfocus_graph();\r\n            }\r\n        }\r\n    }\r\n\r\n    update_searchbar_value(search_string) {\r\n        const config = {...this.state.config};\r\n        if (search_string !== null) {\r\n            config.searchbar_value = search_string;\r\n        } else {\r\n            config.searchbar_value = \"\";\r\n        }\r\n\r\n        this.setState({config: config});\r\n    }\r\n\r\n    submitFormHandler = event => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    update_dataset(dataset_name) {\r\n        const config = this.state.config;\r\n        config.dataset_name = dataset_name;\r\n        config.viz_update_func = 'create_graph';\r\n        config.person_to_display_info = {name: \"\", affiliation: \"\", docs: 0};\r\n        this.load_dataset(config.dataset_name);\r\n        config.searchbar_value = \"\";\r\n        config.selection_active = false;\r\n        config.selection_name = undefined;\r\n        config.show_info_panel = false;\r\n        //setting update to undefined after loading to prevent infinite loop of\r\n        // update -> setting data bindings -> update\r\n        config.viz_update_func = undefined;\r\n\r\n        this.setState({data: null, config: config});\r\n    }\r\n\r\n    async load_dataset(dataset_name) {\r\n        const dataset = encodeURIComponent(dataset_name);\r\n        fetch(`get_network_data?dataset=${dataset}`)\r\n            .then((response) => {\r\n                response\r\n                    .json()\r\n                    .then((data) => {\r\n                        // create a copy of the center names so we can restore them on unfocus.\r\n                        data.center_names_backup = {... data.center_names};\r\n                        this.setState({data:data});\r\n                        return true\r\n                    })\r\n            }).catch(() => {\r\n                console.log(\"error\");\r\n                return false\r\n            });\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Calls when button is pressed.  Shows the table containing info about person when it is\r\n     * hidden and hides table when visible.\r\n     */\r\n    toggle_show_table() {\r\n        let config = {...this.state.config};\r\n        config.show_info_panel = !config.show_info_panel;\r\n        this.setState({config: config});\r\n    }\r\n\r\n    /**\r\n     * Render the app on the page\r\n     *\r\n     * @returns {Node}\r\n     */\r\n    render() {\r\n        if (this.state.data) {\r\n\r\n            return (\r\n                <div className=\"container-fluid\">\r\n                    <Controls  // this is its own row\r\n                        person_to_highlight={this.state.config.person_to_highlight}\r\n                        handle_searchbar_search_and_focus_grpah={(search_string) =>\r\n                            this.handle_searchbar_search_and_focus_grpah(search_string)}\r\n                        handle_searchbar_clear_and_unfocus_graph={() =>\r\n                            this.handle_searchbar_clear_and_unfocus_graph()}\r\n                        handle_viz_events={(event_name, data) =>\r\n                            this.handle_viz_events(event_name, data )}\r\n                        update_searchbar_value={(e) => this.update_searchbar_value(e)}\r\n                        toggle_show_table={() => this.toggle_show_table()}\r\n                        cluster_nodes={this.state.config.cluster_nodes}\r\n                        nodes={this.state.data.nodes}\r\n                        searchbar_value={this.state.config.searchbar_value}\r\n                        dataset_name={this.state.config.dataset_name}\r\n                        update_dataset={\r\n                            (dataset_name) => this.update_dataset(dataset_name)\r\n                        }\r\n                        data_names={this.state.data.nodes}\r\n                        show_dataset_selector={this.state.config.show_dataset_selector}\r\n\r\n                    />\r\n\r\n                    <div className=\"row\">\r\n                        <Viz\r\n                            key={this.state.config.dataset_name}\r\n                            data={this.state.data}\r\n                            config={this.state.config}\r\n                            data_bindings={this.state.data_bindings}\r\n                            handle_viz_events={(event_name, data) =>\r\n                                this.handle_viz_events(event_name, data )}\r\n                        />\r\n                        {this.state.config.show_info_panel &&\r\n                            <Info\r\n                                mouseover={this.state.mouseover}\r\n                                currentColor={this.state.config.color}\r\n                                person={this.state.config.person_to_display_info}\r\n                                show_info_panel={this.state.show_info_panel}\r\n                                toggle_show_table={() => this.toggle_show_table()}\r\n                            />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n            return (\r\n                <div>Loading!</div>\r\n            )\r\n        }\r\n    }\r\n}\r\nMainView.propTypes ={\r\n    dataset_name: PropTypes.string,\r\n    show_dataset_selector: PropTypes.bool.isRequired,\r\n    element_for_graph_sizing: PropTypes.string.isRequired\r\n};\r\n\r\n\r\n// when importing Main what do we get?\r\nexport default MainView;\r\n","/**\r\n * Common.js -- miscellaneous routines useful throughout the system\r\n */\r\n\r\n\r\n/**\r\n * Get the value of a cookie, given its name\r\n * Adapted from https://docs.djangoproject.com/en/2.2/ref/csrf/#ajax\r\n * @param {string} name - The name of the cookie\r\n */\r\nexport function getCookie(name) {\r\n    let cookieValue;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (const raw_cookie of cookies) {\r\n            const cookie = raw_cookie.trim();\r\n            // Does this cookie string begin with the name we want?\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './main_layout.css'\r\n\r\n\r\n\r\nclass NavigationBar extends React.Component {\r\n\r\n    render() {\r\n\r\n        return (\r\n            <nav className=\"navbar navbar-expand-sm navbar-dark bg-dark\">\r\n                <a className=\"navbar-brand nav-item\" href=\"/\">Tobacco Networks</a>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                    data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\"\r\n                    aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\r\n                    <div className='navbar-nav'>\r\n                        <a className=\"nav-item nav-link active\" href=\"/explore_networks/\">\r\n                            Explore Industry Networks</a>\r\n                        <a className=\"nav-item nav-link active\" href=\"/research_directors/\">\r\n                            Research Directors</a>\r\n                        <a className=\"nav-item nav-link active\" href=\"/sterling/\">\r\n                            Theodor Sterling</a>\r\n                        <a className=\"nav-item nav-link active\" href=\"/about/\">\r\n                            About</a>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nclass Footer extends React.Component {\r\n    render() {\r\n        return (\r\n            <footer className=\"footer bg-white text-dark text-center mt-auto\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4 py-3\">\r\n                            <a href=\"https://digitalhumanities.mit.edu/\">\r\n                                <img\r\n                                    src=\"/static/img/nav/dh_logo.png\"\r\n                                    className='footer-img'\r\n                                    alt='Digital Humanities at MIT Logo'\r\n                                />\r\n                            </a>\r\n                        </div>\r\n                        <div className=\"col-4 py-3\">\r\n                            <a href=\"https://www.mit.edu/\">\r\n                                <img\r\n                                    src=\"/static/img/nav/mit_logo.svg\"\r\n                                    className='footer-img'\r\n                                    alt='MIT Logo'\r\n                                />\r\n                            </a>\r\n                        </div>\r\n                        <div className=\"col-4 py-3\">\r\n                            <a href=\"https://www.mellon.org/\">\r\n                                <img\r\n                                    src=\"/static/img/nav/mellon_logo.svg\"\r\n                                    className='footer-img'\r\n                                    alt=\"Mellon Foundation Logo\"\r\n                                />\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </footer>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport class MainLayout extends React.Component {\r\n    render() {\r\n        return (\r\n            <>\r\n                <NavigationBar/>\r\n                <div className='container' id=\"main_content_container\">\r\n                    {this.props.content}\r\n                </div>\r\n                <Footer/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nMainLayout.propTypes = {\r\n    content: PropTypes.node\r\n};\r\n\r\nexport default MainLayout;\r\n","import React from 'react';\r\nimport MainLayout from \"./main_layout\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport './landing_page.css'\r\n\r\n\r\nclass NavSelector extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <li className={\"nav_selector\"}>\r\n                <a className={\"nav_selector_link\"} href={this.props.url}>\r\n                    <img className=\"nav_selector_img\" src={this.props.img_url} alt=\"\"/>\r\n                    <div className=\"nav_selector_title\">\r\n                        <h4>{this.props.title}</h4>\r\n                    </div>\r\n                    <p>{this.props.description}</p>\r\n                </a>\r\n            </li>\r\n        )\r\n    }\r\n}\r\nNavSelector.propTypes = {\r\n    url: PropTypes.string.isRequired,\r\n    img_url: PropTypes.string.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    description: PropTypes.string.isRequired\r\n};\r\n\r\nexport class LandingView extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        const content =\r\n            <>\r\n                <div className=\"container\">\r\n                    <div className=\"col-12\">\r\n                        <h1 className=\"display-2 title\">Tobacco Networks</h1>\r\n                        {/*<h1>Tobacco Networks</h1>*/}\r\n                        <h1 className=\"subtitle\">The Industrys Correspondence Networks\r\n                            at a\r\n                            Glance</h1>\r\n                        <p>\r\n                            During the 20th century, the tobacco industry wasnt just another\r\n                            industryit was a kraken, reaching into every aspect of the lives of\r\n                            Americans. Lobbyists argued against smoking bans by framing smoking as\r\n                            a free and personal choice. Marketers figured out ever new ways of\r\n                            selling cigarettes to children. Scientists, secretly in the industrys\r\n                            employ went on TV and in front of congress to claim that there are still\r\n                            doubts about smokings health harms. Lawyers deployed scorched-earth\r\n                            tactics against anyone trying to sue them. Meanwhile, celebrity\r\n                            spokespeople hawked ever new cigarette brands in magazines and on\r\n                            billboards.\r\n                        </p>\r\n                        <p>\r\n                            How did cigarette makers coordinate this network of executives,\r\n                            researchers, and marketers? How did Philip Morris, R.J. Reynolds, and\r\n                            the other major American tobacco companies synchronize their legal\r\n                            strategies? To explore these questions, we have taken the 1.4 million\r\n                            tobacco industry documents from the 1970s and turned them into a\r\n                            network graph.\r\n                        </p>\r\n                        <p>On this page, you can:</p>\r\n\r\n\r\n                        <ul role=\"tablist\" id=\"nav_selectors_list\">\r\n                            <NavSelector\r\n                                url=\"/explore_networks/\"\r\n                                img_url='/static/img/nav/networks.jpg'\r\n                                title='Network Exploration'\r\n                                description='Explore the social networks of industry scientists and\r\n                                 lawyers'\r\n                            />\r\n                            <NavSelector\r\n                                url=\"/research_directors/\"\r\n                                img_url='/static/img/nav/research_directors.jpg'\r\n                                title='Research Directors'\r\n                                description='How did the industrys research directors\r\n                                 deceive the American public about the health harms of\r\n                                smoking?'\r\n                            />\r\n                            <NavSelector\r\n                                url=\"/sterling/\"\r\n                                img_url='/static/img/nav/sterling.jpg'\r\n                                title='Theodor Sterling: The Industrys Most Reliable Ally'\r\n                                description='Learn more about the computer scientist who received\r\n                                more than $5 millions for his service to the industry.'\r\n                            />\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n            </>;\r\n\r\n        console.log(content);\r\n        return(\r\n            <MainLayout\r\n                content={content}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default LandingView;\r\n","import React from 'react';\r\nimport MainLayout from \"./main_layout\";\r\nimport MainView from \"./main\";\r\n\r\n\r\nexport class NetworkExplorationView extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                <div className='row'>\r\n                    <div className='col-12'>\r\n\r\n\r\n                        <MainLayout\r\n                            content={\r\n                                <div id={\"main_body\"}>\r\n                                    <MainView\r\n                                        show_dataset_selector={true}\r\n                                        element_for_graph_sizing='main_body'\r\n                                    />\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </div>;\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\nexport default NetworkExplorationView;\r\n\r\n","\r\nimport React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport MainView from \"./main\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport './tufte.css'\r\n\r\n\r\nexport class EssayView extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n        let epigraph = null;\r\n        if (this.props.epigraph){\r\n            epigraph =\r\n                <div className=\"epigraph\">\r\n                    <blockquote>\r\n                        <p>{this.props.epigraph.content}</p>\r\n                        <footer>{this.props.epigraph.author}</footer>\r\n                    </blockquote>\r\n                </div>;\r\n        }\r\n\r\n        let subtitle = null;\r\n        if (this.props.subtitle){\r\n            subtitle = <h6>{this.props.subtitle}</h6>\r\n        }\r\n        const essay_header =\r\n            <>\r\n                <h1>{this.props.title}</h1>\r\n                {subtitle}\r\n                <p className=\"subtitle\">{this.props.authors}</p>\r\n                {epigraph}\r\n                <section>\r\n                    {this.props.introduction}\r\n                </section>\r\n            </>;\r\n\r\n\r\n\r\n        return(\r\n            <>\r\n                <div className='row'>\r\n                    <div className='col-12'>\r\n                        <div className='tufte-body' id=\"essay_body\">\r\n                            <article>\r\n                                {essay_header}\r\n                                <MainView\r\n                                    dataset_name={this.props.dataset_name}\r\n                                    show_dataset_selector={false}\r\n                                    element_for_graph_sizing='essay_body'\r\n                                />\r\n                                {this.props.essay_content}\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\nEssayView.propTypes ={\r\n    title: PropTypes.string.isRequired,\r\n    subtitle: PropTypes.string,\r\n    epigraph: PropTypes.object,\r\n    authors: PropTypes.string.isRequired,\r\n    introduction: PropTypes.node.isRequired,\r\n    essay_content: PropTypes.node.isRequired,\r\n    dataset_name: PropTypes.string.isRequired\r\n};\r\n\r\n\r\nexport class EssaySideNote extends React.Component {\r\n\r\n    render(){\r\n        let sidenote_content;\r\n        if (this.props.url){\r\n            sidenote_content =\r\n                <span className=\"sidenote\">\r\n                    <a href={this.props.url}>{this.props.content}</a>\r\n                </span>;\r\n        } else {\r\n            sidenote_content = <span className=\"sidenote\">{this.props.content}</span>;\r\n        }\r\n        return(\r\n            <>\r\n                <label htmlFor=\"sn-extensive-use-of-sidenotes\"\r\n                    className=\"margin-toggle sidenote-number\"></label>&nbsp;\r\n                <input type=\"checkbox\" id=\"sn-extensive-use-of-sidenotes\"\r\n                    className=\"margin-toggle\"/>\r\n                {sidenote_content}\r\n            </>\r\n        )\r\n    }\r\n}\r\nEssaySideNote.propTypes = {\r\n    content: PropTypes.string.isRequired,\r\n    url: PropTypes.string\r\n};\r\n\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport {EssayView, EssaySideNote} from \"./essay\";\r\nimport MainLayout from \"./main_layout\"\r\n\r\n\r\nclass SterlingEssayView extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n        const epigraph = {\r\n            'content': 'There are three types of lies: lies, damned lies, and statistics.',\r\n            'author': 'Mark Twain'\r\n        };\r\n\r\n        const introduction =\r\n            <>\r\n                <p>\r\n                    In many respects, the tobacco industrys rise and continued success long\r\n                    after the harmful effects of cigarettes were understood by researchers had\r\n                    to do with a few select researchers , lawyers, and industry spokespeople who\r\n                    supported the industry and worked to obfuscate the truth about  smokings\r\n                    health harms. How did these researchers operate? How did they use scientific\r\n                    rhetoric and evidence to produce ignorance instead of knowledge? This essay\r\n                    uses one of the industrys favorite guns for hire, Theodor Sterling, to\r\n                    explore these questions. Theodor Sterling, also known as Ted Sterling, was\r\n                    a professor of statistics and computing who held several academic and\r\n                    professorial positions across colleges in the United States, including\r\n                    Director of the Computing Center at the University of Cincinnati.\r\n                    <EssaySideNote\r\n                        content=\"Stanton Glantz, John Slade et. al. The Cigarette\r\n                        Papers. Berkeley: University of California Press, 1996, p. 296-301.\"\r\n                    />\r\n                    There he\r\n                    combined statistics and computer science in biomedical research. Sterlings\r\n                    access to mainframe computers via his workplace allowed for his side\r\n                    business, a small consulting firm called Theodor D Sterling & Associates\r\n                    (TDS, also referred to as TDS&A, TDS Ltd., TDSA) to thrive at a time in\r\n                    history when computing power was both rare and costly.\r\n                </p>\r\n                <p>\r\n                    Sterlings success was also due in part to his willingness to work for anyone,\r\n                    which quickly made his research services into a great asset for the tobacco\r\n                    industry. From 1968 to 1990, he worked for the Council for Tobacco Research\r\n                    (CTR) on nine different Special Projects (which were really just a front for\r\n                    the CTR to pay its most trusted allies since these did not have to go through\r\n                    the CTRs Scientific Advisory Board), pocketing a total of $5,560,210 for his\r\n                    troubles. Additionally, Sterling worked directly for the tobacco companies and\r\n                    the law firms representing them, so it is likely that he received more than $10\r\n                    million in total.\r\n                    <EssaySideNote\r\n                        content=\"Stephan Risi. Manufacturing Doubt Distraction and Subversion\r\n                        Research at the Council for Tobacco Research\"\r\n                        url=\"http://tobacco-analytics.org/case/ctr\"\r\n                    />\r\n                    As a result, TDS grew to be one of the most significant\r\n                    contributors of fake scientific documents playing down the harms of smoking and\r\n                    tobacco-use from the early 1960s and up until the 1990s.\r\n                </p>\r\n            </>;\r\n\r\n        const essay_content =\r\n            <>\r\n                <section>\r\n                    <h2>What kind of research and special projects would be worth such a large\r\n                        amount\r\n                        of money?</h2>\r\n                    <p>\r\n                        Ted Sterling spent much of his career researching causes of lung cancer\r\n                        other\r\n                        than smoking, arguing that soot, as well as social class and occupational\r\n                        hazards, were more significant factors in causing lung cancer than smoking.\r\n                        In his career, Sterling prolifically worked with data collection and\r\n                        analysis\r\n                        procedures. Often, Sterling used his experience with statistics to argue\r\n                        against\r\n                        National Health Survey data and other scientific findings on the basis of\r\n                        supposedly invalid data sampling and analysis. For instance, in response to\r\n                        a\r\n                        so called morbidity report published in May 1967 by the Public Health\r\n                        Service\r\n                        which suggested a link between cigarettes and cancer, Sterling was quoted\r\n                        expressing his clear opposition.\r\n                        <EssaySideNote\r\n                            content=\"National Center for Health Statistics: Cigarette\r\n                            Smoking and Health Characteristics, United States, July 1964-June 1965.\r\n                            Vital and Health Statistics 10, No. 34 (Hyattsville, MD), May 1967.\"\r\n                        />\r\n                         He stated the report on cigarette smoking and\r\n                        health characteristics is based on most uncertain and inaccurate data, it is\r\n                        based on very in-adequate analytic procedures, and it lacks conviction that\r\n                        it\r\n                        really demonstrates any difference between smokers and nonsmokers.\r\n                        <EssaySideNote\r\n                            content=\"Anonymous, 1970, p. 26.\"\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=jnbh0137\"\r\n                        />\r\n                         It was\r\n                        sentiments like this that helped fuel the growing movement against\r\n                        cigarettes\r\n                        as a cause of cancer. In another case, when E. Cuyler Hammond produced a\r\n                        study\r\n                        on the increased death rates caused by smoking in one million men and women\r\n                        in\r\n                        1966, Sterling received $57,865 to express his enormous doubts about the\r\n                        validity of National Health Survey Data conclusions, (those doubts being\r\n                        expressed most importantly in front of the Congressional Committee on Public\r\n                        Works  in 1968).\r\n                        <EssaySideNote\r\n                            content=\"Special Project Number 51, 51S. Feasibility of a Definitive\r\n                            Evaluation of the Data Concerning Smoking and General Morbidity and\r\n                            Disability.\"\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=tkjd0024\"\r\n                        />\r\n                        Through these examples, and countless others, it becomes\r\n                        clear that the work of Ted Sterling in support of the Tobacco Industry was\r\n                        primarily motivated by a desire for personal wealth. However, the\r\n                        consequences\r\n                        of his work were felt universally and served to ambiguate the truth and\r\n                        prolong\r\n                        the harms of cigarette smoking for decades.\r\n                    </p>\r\n                    <p>\r\n                        Another important feature of Sterlings research was his objective to\r\n                        delegitimize the known dangers of second-hand smoking. Funded by Council for\r\n                        Tobacco Research (CTR), he went to extensive efforts to find potential\r\n                        causes\r\n                        of lung cancer that wouldnt pose a threat to the power of Big Tobacco,\r\n                        namely\r\n                        indoor air pollution. While working for the University of Cincinnati in\r\n                        March\r\n                        of 1965, Ted Sterling went on record before the Senate Committee on Commerce\r\n                        to\r\n                        state that no true verdict had been reached regarding whether cigarette\r\n                        smoke\r\n                        could cause cancer, claiming the results of all [animal studies which\r\n                        attempted\r\n                        to produce lung cancer by means of cigarette smoke] have been negative.\r\n                        <EssaySideNote content=\"United States. Congress. Senate. Committee on\r\n                        Commerce.\r\n                        Cigarette Labeling And Advertising: Hearings, Eighty-ninth Congress, First\r\n                        Session. Washington: U. S. Government Printing Office, 1965.\" />\r\n                        Later\r\n                        in this session, he condemned other researchers criteria for scientific\r\n                        proof\r\n                        in an effort to guard his statement against scientific interpretations\r\n                        that\r\n                        showed any correlation between cigarette smoke and disease. Simply put, Ted\r\n                        Sterling helped generate doubt about the negative impacts of tobacco usage\r\n                        by\r\n                        running his own experiments and testifying against the validity of other\r\n                        scientific research that might have hurt the tobacco companies.\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Moving the bar: How Sterling argued that there was still doubt about\r\n                        smokings link to lung cancer</h2>\r\n                    <p>\r\n                        Despite getting paid large sums of money for research into other causes of\r\n                        lung cancer, many of Sterlings claims lacked firm scientific backing,\r\n                        research, and experiments. Rather, he relied heavily on his credibility as\r\n                        a statistician and academic to back his ideas and counterclaims. Most of the\r\n                        jobs that the CTR assigned to Sterling were explicit attempts to discredit\r\n                        and invalidate research that tried to link smoking as a cause of lung\r\n                        cancer. His career as a statistician gave credence to his ability to argue\r\n                        against the statistical methods and practices that other researchers were\r\n                        using at the time.\r\n                    </p>\r\n                    <p>\r\n                        Sterlings criticisms of other research were often merely attacks on the\r\n                        researchers themselves or petty criticisms of their methods. For example,\r\n                        in his response to the 1964 Surgeon Generals Report,\r\n                        <EssaySideNote\r\n                            content=\"Theodor Sterling. An Evaluation and Review of the Report on\r\n                            Smoking and Health by the Advisory Committee to the Surgeon General.\r\n                            March 1964.\"\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=nnkp0215\"\r\n                        />\r\n                        Sterling took issue\r\n                        with the fact that the Surgeon General was ready to close the case and try\r\n                        to save lives even if he was only 99.9% sure that smoking caused cancer. A\r\n                        real scientist, he seems to argue, would have waited another twenty years\r\n                        to root out the remaining 0.1%.\r\n                        <EssaySideNote\r\n                            content=\"Stephan Risi. Manufacturing Doubt Distraction and Subversion\r\n                            Research at the Council for Tobacco Research\"\r\n                            url=\"http://tobacco-analytics.org/case/ctr\"\r\n                        />\r\n                        In all likelihood, no amount of poof would\r\n                        have satisfied Sterling because that would mean closing the case, which is\r\n                        the opposite of what the tobacco industry wanted. Rather, Sterling would\r\n                        have increased his scrutiny of other research and what constituted a causal\r\n                        relationship so that he could always say that there was still room for doubt\r\n                        about the harmful effects of smoking.\r\n                    </p>\r\n                    <p>\r\n                        This statement exemplifies a lot about Sterlings supposed beliefs and\r\n                        research. He could not truly provide evidence countering the claims against\r\n                        smoking and its negative effects, so rather he had to argue against the\r\n                        methods that led to those results and how statistically significant those\r\n                        results were. Such claims now seem to be preposterous and we might wonder\r\n                        how they could ever be believed, but at the time, a lot of the research that\r\n                        was being released was very new and ran contrary to what many people\r\n                        believed. Considering the fact that Sterling had a reputation and career\r\n                        based on statistical analysis, his claims didnt seem so absurd and likely\r\n                        actually appealed to many peoples confirmation bias.\r\n                    </p>\r\n                    <p>\r\n                        The CTR was pleased with many of his congressional hearings and papers which\r\n                        merely contested other researchers evidence instead of introducing new\r\n                        evidence. Despite Sterlings credentials as a statistician and his appeal\r\n                        towards the publics confirmation bias, he did not fool everyone. In 1972,\r\n                        when Sterling was invited to a meeting for the American Association for the\r\n                        Advancement of Science, his presentation entitled Difficulties of Measuring\r\n                        the Effects of Air Pollution vs the Effects of Smoking was criticized by\r\n                        members for presenting no new data and having an axe to grind with\r\n                        epidemiologists like Hammond, charging that they did not make their data\r\n                        freely available for review. Overall, the paper [had] no scientific merit\r\n                        or worth according to one reporter. The reporter went on, saying that the\r\n                        refusal of the investigators [Sterling] to permit review, and in depth\r\n                        analysis of all data, is in fact a violation of sound, accepted scientific\r\n                        approach.\r\n                        <EssaySideNote\r\n                            content=\"JMB. Report on Difficulties of Measuring the Effects of Air\r\n                            Pollution vs the Effects of Smoking - A Paper Presented to Theodor D.\r\n                            Sterling at the 138th Meeting of the American Association for the\r\n                            Advancement of Science. December 27 1972. 10 January 1973.\"\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=jjym0053\"\r\n                        />\r\n                        Such a statement paints Sterling as a hypocrite, given his own attacks on\r\n                        other researchers during his presentation. These claims and comments arent\r\n                        surprising considering most of Sterlings research was less experimental and\r\n                        more data driven, while also critiquing any claims that might hurt the big\r\n                        tobacco companies.\r\n                    </p>\r\n                    <p>\r\n                        Sterlings network graph offers us insights into how Sterling triangulated\r\n                        his position between academia and industry. From the graph, we can see that\r\n                        he was a central figure and intermediary between academics at Harvard and\r\n                        John Hopkins to those in the industry working for the CTR or the American\r\n                        Cancer Society. When looking deeper into Sterlings connections with other\r\n                        researchers beyond the CTR versus within it, it is interesting to note the\r\n                        relationship he has with some of them. When Sterling sent a letter in 1971\r\n                        to Dr. Cuyler Hammond in 1971 requesting access to Hammonds data to analyze\r\n                        his methods, he addressed Hammond very professionally and even used a lot of\r\n                        flattery.\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to E. Cuyler Hammond,\" March 18,\r\n                            1971.'\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=gsnd0137\"\r\n                        />\r\n                        This seems appropriate considering Hammond is the same researcher\r\n                        whose research Sterling had been paid to criticize before for drawing far\r\n                        fetched conclusions. Hammond wrote back, declining to give his data to\r\n                        Sterling due to privacy concerns.\r\n                        <EssaySideNote\r\n                            content='E. Cuyler Hammond, \"Letter to Theodor Sterling,\" March 31,\r\n                            1971.'\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=kxhg0215\"\r\n                        />\r\n                        Though we dont know for sure, we can\r\n                        likely assume that Hammond realized Sterlings connection to the tobacco\r\n                        industry (or at least remembered what Sterling said about his previous\r\n                        research) and did not want to allow for his research to be exploited by\r\n                        Sterling and the CTR.\r\n                    </p>\r\n                    <p>\r\n                       In comparison, many letters between Sterling and his associates at the CTR\r\n                        started formal, but over a few years, many of the letters have friendlier\r\n                        tones and even discuss get togethers between him and his recipient. For\r\n                        instance, this can be seen in letters between Sterling and Dr. Robert\r\n                        Hockett of the CTR. At first, his letters are very professional and even\r\n                        address Dr. Hockett by his full name and title,\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to Robert Hockett,\" March 30, 1964.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=zykp0215'\r\n                        />\r\n                        but over the years, Sterling\r\n                        begins addressing Hockett by his nickname and using a friendlier, less\r\n                        professional tone, even going to the extent of discussing meeting up the\r\n                        next time Sterling is in town.\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to Robert Hockett,\" April 1, 1980.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=fzwb0005'\r\n                        />\r\n                        This progression in the tone of the letters\r\n                        over the years, suggests a close relationship between Sterling and his\r\n                        colleagues at the CTR in comparison to his relationship between him and\r\n                        researchers at the American Cancer Society, such as Hammond.\r\n                    </p>\r\n                    <p>\r\n                        Finally, the Sterlings network graph helps demonstrate his connection\r\n                        between his research and the lawyers for the tobacco industry. Their\r\n                        connection had two main caveats: the first was that most of Sterlings work,\r\n                        research, and ideas were sent to lawyers such as William Shin of Shook,\r\n                        Hardy, and Bacon to then be passed on to the big tobacco companies and the\r\n                        second was many of Sterlings budget requests would go to these lawyers (as\r\n                        well as the CTR) for approval and payment. Sometimes, Sterling sent letters\r\n                        to the lawyers of the big tobacco companies describing ways in which they\r\n                        could attack the legitimacy of other research results, such as the Cigarette\r\n                        Smokers Annual from 1966\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to William Shinn,\" January 3, 1968.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=xxcj0102'\r\n                        />\r\n                        or Hammonds data and the Surgeon Generals report.\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to William Shinn,\" May 7, 1970.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=gzwd0040'\r\n                        />\r\n                        Another example is Sterling suggesting a strategy that the lawyers and\r\n                        tobacco companies could use was placing an ad into a well read scientific\r\n                        journal discussing how other researchers were keeping their data private\r\n                        and unavailable for analysis.\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to William Shinn,\" August 14, 1970.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=hnvw0040'\r\n                        />\r\n                        Another main talking point between Sterling\r\n                        and the lawyers representing the tobacco companies was the issue of\r\n                        financing and budgets. In many letters, Sterling asked for funds, such as\r\n                        for travel to conferences in other countries,\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to William Shinn,\" February 29,\r\n                            1972.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=ylbw0040'\r\n                        />\r\n                        or sending them a proposed\r\n                        budget for further research opportunities.\r\n                        <EssaySideNote\r\n                            content='Theodor Sterling, \"Letter to William Shinn,\" May 7, 1970.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=lhgd0040'\r\n                        />\r\n                        Overall, Sterlings connection\r\n                        with the lawyers shows another way that he was an intermediary and\r\n                        connection between industry and academia.\r\n                    </p>\r\n                    <p>\r\n\r\n                        Through his work, Ted Sterling established a veritable fortune by promoting\r\n                        a pro-smoking agenda through his companys research, legal work, and even\r\n                        by sending experts to speak at conferences and Congressional inquiries. In\r\n                        fact, in the early 90s, Sterlings business was privately granted a sum of\r\n                        one million dollars for their projects by the Council for Tobacco Research.\r\n                        Each paper published by TDS tended to arrive at conclusions in line with\r\n                        the tobacco industrys will. In the end, he helped cloud public perception\r\n                        on the dangers of smoking and was generously rewarded for his research\r\n                        by the tobacco industry.\r\n                    </p>\r\n                </section>\r\n            </>;\r\n\r\n        //\r\n        // const content =\r\n        //     ;\r\n\r\n        return(\r\n            <MainLayout\r\n                content={\r\n                    <EssayView\r\n                        title='Ted Sterling: The Man, the Myth, the Liar'\r\n                        epigraph={epigraph}\r\n                        introduction={introduction}\r\n                        authors='Ife Ademolu-Odeneye, Crista Falk, and Jordan Wilke'\r\n                        dataset_name='sterling'\r\n                        essay_content={essay_content}\r\n                    />\r\n                }\r\n            />\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default SterlingEssayView;\r\n","import React from 'react';\r\n//import PropTypes from 'prop-types';\r\nimport MainLayout from \"./main_layout\"\r\n\r\nimport {EssayView, EssaySideNote} from \"./essay\";\r\n\r\nclass ResearchDirectorsEssayView extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n        const introduction =\r\n            <>\r\n                <p>\r\n                    The Argentinian researcher Angel Roffo identified carcinogens in smoke as early\r\n                    as the 1930s, and by the 1940s tobacco companies had begun to discuss tobacco\r\n                    as a potential carcinogen.\r\n                    <EssaySideNote content='Proctor, Robert N. Golden Holocaust: Origins of the\r\n                    Cigarette Catastrophe and the Case for Abolition. 1st ed., University of\r\n                    California Press, 2011, p. 16.' />\r\n\r\n                    However, the public remained largely\r\n                    unaware of the true health implications of smoking, as key figures within the\r\n                    tobacco industry collaboratively strove to protect the industrys hold on its\r\n                    consumers. The directors of research at Brown & Williamson (B&W), R. J. Reynolds\r\n                    (RJR), Philip Morris (PM), and Lorillard (LL), were among the major figures\r\n                    associated with the tobacco industry and played significant roles in shaping\r\n                    the focus of research funded by the tobacco industry. They pushed for the\r\n                    funding of research used to distract consumers and raised doubts regarding\r\n                    experiments that showed results linking smoking to harmful health impacts. In\r\n                    this way, the industrys research directors successfully concealed proof of\r\n                    smokings health hazards from the American public until 2000, when Philip\r\n                    Morris,\r\n                    the world&apos;s largest transnational tobacco company, released a statement\r\n                    admitting an overwhelming medical and scientific consensus that cigarette\r\n                    smoking causes lung cancer, heart disease, emphysema and other serious disease\r\n                    in smokers\r\n                    <EssaySideNote content='Cummings, K M. A promise is a promise. Tobacco control\r\n                    vol. 12,2 (2003): 117-8. doi:10.1136/tc.12.2.117' />\r\n                    on their website.\r\n                </p>\r\n                <h2>Our Project: A Force-Directed Network Graph to Identify Major Players</h2>\r\n                <p>\r\n                    We extracted data about the authors and recipients of 1.4 million documents\r\n                    from the 1970s, including letters, reports, and memos that were sent and\r\n                    received by persons associated with the tobacco industry like executives and\r\n                    lawyers but also academic researchers hired as consultants. By computing a\r\n                    force-directed network graph, we visualized the connections between key\r\n                    researchers at the companies mentioned above. Implemented as an interactive web\r\n                    application, this enabled us to identify several research directors who were\r\n                    highly connected in the network.\r\n                </p>\r\n            </>;\r\n\r\n        const essay_content =\r\n            <>\r\n                <section>\r\n                    <p>\r\n                        Among these research directors, Ivor Wallace Hughes (B&W), Murray Senkus\r\n                        (RJR),\r\n                        Helmut Wakeham (PM), and Alexander White Spears (LL), appeared to have had\r\n                        the\r\n                        greatest number of connections. Further investigation reveals that indeed\r\n                        they\r\n                        were key figures and wielded significant influence over the actions of\r\n                        tobacco\r\n                        research and the tobacco industry, demonstrating the power of our network\r\n                        visualizations in identifying crucial players and connections in the tobacco\r\n                        industry. We searched for documents these research directors wrote in the\r\n                        database and determined several strategies they used to foster doubt about\r\n                        the\r\n                        validity of scientific evidence linking smoking and cancer and to distract\r\n                        consumers from rising concern over the health impact of tobacco. These\r\n                        strategies included setting up new research institutions to propagate the\r\n                        tobacco industrys goals, manipulating existing scientific research\r\n                        agencies,\r\n                        and challenging the science behind experiments that reported results linking\r\n                        health concerns with smoking.\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Creation of Research Institutions: The Council for Tobacco\r\n                        Research (CTR)</h2>\r\n                    <p>\r\n                        A major strategy taken by research directors was to set up research agencies\r\n                        to advance the industrys own benefit. The main vehicle to carry out this\r\n                        strategy was the Council for Tobacco Research (CTR), which was formed by\r\n                        CEOs of Americas biggest tobacco companies and PR firm Hill & Knowlton to\r\n                        advance the interests of the tobacco industry rather than to meaningfully\r\n                        add to existing literature linking its products to consumer health outcomes.\r\n                        In other words, the CTRs ultimate goal was to prevent or discredit\r\n                        research studies linking smoking to disease. Its mantra: Not Yet Proven.\r\n                        <EssaySideNote content='Proctor, Robert N. Golden Holocaust: Origins of the\r\n                        Cigarette Catastrophe and the Case for Abolition. 1st ed., University of\r\n                        California Press, 2011, p. 16f.' />\r\n                    </p>\r\n                    <p>\r\n                        Documents from Ivor Wallace Hughes and Helmut Wakeham provide first-hand\r\n                        evidence that demonstrate the true motivations of CTR. Wakeham was the Vice\r\n                        President for Research and Development at Philip Morris and\r\n                        has been called the most powerful researcher at the worlds most powerful\r\n                        tobacco company.\r\n                        <EssaySideNote content='Proctor, Robert N. Golden Holocaust: Origins of the\r\n                        Cigarette Catastrophe and the Case for Abolition. 1st ed., University of\r\n                        California Press, 2011, p. 298.' />\r\n                        In a revealing document Wakeham wrote in\r\n                        1970 to Joseph F. Cullman III, the chairman of the company, Wakeham admitted\r\n                        CTR and the Industry have publicly and frequently denied what others find\r\n                        as truth. He wrote candidly, Lets face it. We are interested in\r\n                        evidence which we believe denies the allegation that cigarette smoking\r\n                        causes\r\n                        disease. He acknowledged both lawyers and scientists will agree...trying\r\n                        to prove that cigaret smoking does not cause disease [would be] extremely\r\n                        difficult. Hughes, the director of research and development at Brown &\r\n                        Williamson in 1970 (who later became the chairman and CEO of B&W), expressed\r\n                        similar sentiments in one document in 1970, in which he called for\r\n                        reshaping the CTR...to achieve a research program more pertinent to the\r\n                        industrys need,\r\n                        <EssaySideNote\r\n                            content='Hughes, Ivor Wallace, \"B&W Effort to Reshape the CTR,\" June 5,\r\n                             1970.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=zygn0050'\r\n                        />\r\n                        providing further evidence that the\r\n                        public appearance of CTR was a front, with its underlying purpose to\r\n                        advance the goals of the industry rather than act as an objective scientific\r\n                        research council with the health of its consumers in mind.\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Manipulation of Research Institutions</h2>\r\n                    <p>\r\n                        Besides the CTR, research directors also manipulated scientific research in\r\n                        other ways to protect the industry. For example, research directors built\r\n                        relationships with personnel within institutions, effectively creating\r\n                        insiders that would advance the industrys interests. For example, Huges\r\n                        communicated closely with Gio Gori, a deputy director at NCIs Division of\r\n                        Cancer Cause and Prevention. As the industrys ally at NCI, Gori in 1976 and\r\n                        after still claimed that smoking twenty or more Carlton cigarettes (a type\r\n                        of low-tar cigarette) per day would not increase the risk of disease, and\r\n                        in 1980, Gori left the NCI with a $400,000 endowment from B&W.\r\n                        <EssaySideNote content='Proctor, Robert N. Golden Holocaust: Origins of the\r\n                        Cigarette Catastrophe and the Case for Abolition. 1st ed., University of\r\n                        California Press, 2011, p. 37.' />\r\n                    </p>\r\n                    <p>\r\n                        When research studies resulted in conclusions that would negatively impact\r\n                        sales or the reputation of the tobacco industry, research directors\r\n                        attempted to prevent these results from becoming widespread. This can be\r\n                        seen in documents written by Alexander White Spears, who was a research\r\n                        associate at Lorillard Tobacco Company and eventually became the CEO and\r\n                        chairman.\r\n                        <EssaySideNote\r\n                            content='Spears, Alexander White, \"Resume.\"'\r\n                            url='https://www.industrydocuments.ucsf.edu/docs/mpxj0015'\r\n                        />\r\n                        In 1960 Spears wrote to\r\n                        John W. Lowell, a chemistry professor at Wake Forest College, and alerted\r\n                        Lowell of the industrys recent decision [that] in the interest of the\r\n                        Company and the tobacco industry, [papers that concern] compounds\r\n                        controversial in the health aspects of smoking should not be presented.\r\n                        <EssaySideNote\r\n                            content='Spears, Alexander White, \"Letter to John Lowell,\" August 17,\r\n                            1960.'\r\n                            url='https://www.industrydocuments.ucsf.edu/docs/gzjk0154'\r\n                        />\r\n\r\n                    </p>\r\n                    <p>\r\n                        In another document from 1974, Spears acknowledged the true value of tobacco\r\n                        research to the industry:\r\n                    </p>\r\n                    <blockquote cite=\"https://www.industrydocuments.ucsf.edu/docs/sxjf0110\">\r\n                        <p>\r\n                            Historically, the joint industry funded smoking and health research\r\n                            programs\r\n                            have not been selected against specific scientific goals, but rather for\r\n                            various purposes such as public relations, political relations, position\r\n                            for\r\n                            litigation, etc...In general, these programs have provided some buffer\r\n                            to\r\n                            the public and political attack of the industry, as well as background\r\n                            for\r\n                            litigious strategy.\r\n                        </p>\r\n                        <footer><a href=\"https://www.industrydocuments.ucsf.edu/docs/sxjf0110\">\r\n                            Spears, Alexander White, III. &quot;Memorandum,&quot; June 24, 1974.</a>\r\n                        </footer>\r\n                    </blockquote>\r\n                    <p>\r\n                        Like other research directors, Spears saw tobacco research as a way to\r\n                        distract and mislead the public to the advantage of the industry. Statements\r\n                        like Spearss above serve to remind us just how explicit some of the\r\n                        documents we analyzed were in regard to the goals and motivations of the\r\n                        tobacco industry given their public statement that there was a real\r\n                        controversy about smokings health harms. Many actions that individuals in\r\n                        the industry took that were once unknown or shrouded in secrecy are now\r\n                        open to the public and to analysis, and the discoveries yielded have been\r\n                        eye-opening if not shocking.\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Challenging the Validity of Experiments</h2>\r\n                    <p>\r\n                        Another strategy research directors adopted was to challenge scientific\r\n                        experiments that demonstrated the negative effects of tobacco on health.\r\n                        For example, Hughes wrote a note in 1974 to criticize the National Cancer\r\n                        Institute (NCI) report on the relationship between nicotine and\r\n                        tumorigenicity. He claimed that although the correlations are strong\r\n                        there is no strong scientific basis for concluding that the level of\r\n                        nicotine in tobacco is related to tumorigenicity. He argued that strong\r\n                        correlations are not necessarily causes, that the experiments were not\r\n                        designed to specifically examine the effect of nicotine, that many unknown\r\n                        variables were present, and that previous unpublished experiments by the\r\n                        CTR showed contrary indications to those found in the NCI report.\r\n                        <EssaySideNote\r\n                            content='Hughes, Ivor Wallace, \"Note Re: Relation between Nicotine and\r\n                            Tumorigenicity,\" July 22, 1974.'\r\n                            url='https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=jggn0050'\r\n                        />\r\n                    </p>\r\n                    <p>\r\n                        In another letter Hughes co-authored with other research directors\r\n                        (including Murray Senkus and Helmut Wakeham) in 1972, he objected to NCIs\r\n                        proposed dog inhalation experiments on the effects of nicotine by claiming\r\n                        the use of tracheostomy for introducing smoke directly into the dogs\r\n                        lungs is much too artificial, traumatic and stressful, and the chemical\r\n                        composition of the smoke as received directly into the pulmonary system of\r\n                        the dogs will differ radically from that ordinarily inhaled by humans\r\n                        <EssaySideNote\r\n                            content='Bates, William Wannamaker, Ivor Wallace Hughes,\r\n                            Murray Senkus, Alexander White Spears, Helmut Wakeham, \"Letter, re:\r\n                             Objections to proposed dog inhalation experiment funded by National\r\n                             Cancer Institute,\" March 24, 1972.'\r\n                            url=\"https://www.industrydocuments.ucsf.edu/tobacco/docs/#id=mfhv0035\"\r\n                        />\r\n                        Ironically, these criticisms on NCIs experiments were sent\r\n                        to Gio Gori, the deputy director at NCI who acted as an ally to the\r\n                        industry.\r\n                    </p>\r\n                    <p>\r\n                        Similar to Hughes, Murray Senkus, the director of chemical research at\r\n                        Reynolds, also made criticisms on various experiments that\r\n                        demonstrated the health hazards of smoking.\r\n                        <EssaySideNote content='Proctor, Robert N. Golden Holocaust: Origins of the\r\n                        Cigarette Catastrophe and the Case for Abolition. 1st ed., University of\r\n                        California Press, 2011, p. 196.' />\r\n                        For example, in a letter Senkus\r\n                        wrote in 1976 that discussed issues with the FTC labs experiments on\r\n                        effects of smoking, he called their carbon monoxide analysis inherently\r\n                        inaccurate and claimed the data complexity increase[s] the opportunity\r\n                        for human error and that the data collected was not applicable to all\r\n                        brands and cigarette types\r\n                        (Senkus, Letter from Murray Senkus to Allan J Topol 2).\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Improving Reputation of the Industry by Funding Research</h2>\r\n                    <p>\r\n                       Besides the tactics of criticizing experimental procedures, Senkus also\r\n                        attempted to establish research funds at universities to build the\r\n                        credibility of the tobacco industry. One document revealed he\r\n                        wholeheartedly endorse establishment of an R. J. Reynolds Industries Fund\r\n                        at MIT, with the goal being to discharge our obligation of a corporate\r\n                        citizen and assure our credibility in the scientific community.\r\n                        (Senkus, Proposal for Establishment of RJ Reynolds Industries Fund 3)\r\n                    </p>\r\n                    <p>\r\n                        The CTR provides another example of ostensibly supporting scientific\r\n                        research to improve the industrys reputation. For instance, Wakeham\r\n                        considered that by aiming CTR to search for causes of diseases, this\r\n                        would demonstrate the industrys interest in human welfare and alleviation\r\n                        of human suffering, and that therefore the public should love and respect\r\n                        us and buy our products.\r\n                        <EssaySideNote\r\n                            content='Wakeham, Helmut, \"Best Program for C.T.R,\" December 8, 1970.'\r\n                            url='https://www.industrydocuments.ucsf.edu/docs/#id=ymkp0124'\r\n                        />\r\n\r\n                    </p>\r\n                </section>\r\n                <section>\r\n                    <h2>Summary</h2>\r\n                    <p>\r\n                        Our force directed graph extracted data from more than 11.3 million\r\n                        documents relating to the tobacco industry, many of which were internal and\r\n                        previously classified. It only takes a few glances at some of these\r\n                        documents to realize that their initial confidentiality of these documents\r\n                        was for good reason; many of these documents are particularly incriminating.\r\n                        They contain blunt acknowledgements from powerful individuals in the tobacco\r\n                        industry about the industrys unofficial goals of distracting and deceiving\r\n                        consumers about the health hazards of smoking. And with the help of our\r\n                        force directed graph, we were able to understand just how much pull such\r\n                        individuals had within the tobacco industrys network.\r\n                    </p>\r\n                </section>\r\n            </>;\r\n\r\n\r\n        const content =\r\n            <EssayView\r\n                title='The Smokescreen'\r\n                subtitle='How the Research Directors of American Cigarette Makers\r\n                Deceived the American Public About the Health Hazards of Smoking'\r\n                epigraph={null}\r\n                introduction={introduction}\r\n                authors='Raquel Garcia, Christina Wang, Angel Yang'\r\n                dataset_name='research_directors'\r\n                essay_content={essay_content}\r\n            />;\r\n\r\n        return(\r\n            <MainLayout\r\n                content={content}\r\n            />\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default ResearchDirectorsEssayView;\r\n","import React from 'react';\r\nimport MainLayout from \"./main_layout\";\r\nimport './team.css'\r\n\r\nexport class AboutView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const render_team_member = (name, img_src) => {\r\n            return (\r\n                <div className=\"col-6 col-md-3 col-lg-2\">\r\n                    <div className=\"team-member\">\r\n                        <img className=\"mx-auto rounded-circle\"\r\n                            src={img_src} alt={name}/>\r\n                        <h4>{name}</h4>\r\n                        <p className=\"text-muted\">UROP</p>\r\n                    </div>\r\n                </div>\r\n            )};\r\n\r\n        const render_staff = (name, img_src, position) => {\r\n            return (\r\n                <div className=\"col-sm-6 text-center\">\r\n                    <div className=\"team-member-lg\">\r\n                        <img className=\"mx-auto rounded-circle\"\r\n                            src={img_src}\r\n                            alt={name} />\r\n                        <h4>{name}</h4>\r\n                        <p className=\"text-muted\">{position}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n        };\r\n\r\n        const render_staff_lower = (name, img_src, position) => {\r\n            return (\r\n                <div className=\"col-sm-4 text-center\">\r\n                    <div className=\"team-member-lg\">\r\n                        <img className=\"mx-auto rounded-circle\"\r\n                            src={img_src}\r\n                            alt={name} />\r\n                        <h4>{name}</h4>\r\n                        <p className=\"text-muted\">{position}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n        };\r\n\r\n        const content = (\r\n            <>\r\n                <div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <h1 className=\"display-4\">About this Project</h1>\r\n\r\n                            <p>\r\n                                How do you sift through several decades-worth of documents from\r\n                                the Tobacco industry to paint a cohesive picture of how its\r\n                                major players have deceived and misled the public about the\r\n                                dangers of smoking?\r\n                            </p>\r\n                            <p>\r\n                                Led by MIT postdoctoral associate Stephan Risi, the Tobacco\r\n                                Networks projects goal was to produce a general network\r\n                                visualization of roughly 11 million documents of data related to\r\n                                Tobacco researchers, lawyers, and marketing experts in a way\r\n                                that visually elucidates the connections between significant\r\n                                people and corporations in the industry. In this way, links\r\n                                which highlight the sinister and overwhelming efforts to\r\n                                propagate pro-cigarette platforms, often backed by false\r\n                                research put out by major institutions, could be clearly formed.\r\n                            </p>\r\n                            <p>\r\n                                The anticipated scope of the Tobacco Networks project is to\r\n                                provide a resource for those studying the strategies employed by\r\n                                tobacco companies throughout history to persuade consumers and\r\n                                mask the addictive effects of the drug.\r\n                            </p>\r\n                            <p>You can find the code for this project on <a className=\"about_link\"\r\n                                href=\"https://github.com/dhmit/tobacco_networks\">Github.</a></p>\r\n                            <p>The documents themselves are available at the UCSFs <a\r\n                                className=\"about_link\"\r\n                                href=\"https://www.industrydocuments.ucsf.edu/tobacco/\">\r\n                                Truth Tobacco Industry Documents Archive.\r\n                            </a></p>\r\n                        </div>\r\n                    </div>\r\n                    <section id=\"lab\">\r\n                        <div className=\"container\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-lg-12 text-center\">\r\n                                    <h1 className=\"display-4\">Staff and\r\n                                        Members</h1>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                {render_staff(\"Michael Scott Cuthbert\",\r\n                                    \"/static/img/team/Cuthbert_Michael.jpg\",\r\n                                    \"Faculty Director & Associate Professor\")}\r\n\r\n                                {render_staff(\"Ryaan Ahmed\",\r\n                                    \"/static/img/team/Ahmed_Ryaan.jpg\",\r\n                                    \"Technical Director Senior Research Engineer\")}\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                {render_staff_lower(\"Stephan Risi\",\r\n                                    \"/static/img/team/Risi_Stephan.jpg\",\r\n                                    \"Postdoctoral Associate\")}\r\n\r\n                                {render_staff_lower(\"Erica Zimmer\",\r\n                                    \"/static/img/team/Zimmer_Erica.jpg\",\r\n                                    \"Postdoctoral Associate\")}\r\n\r\n                                {render_staff_lower(\"Nicole Fountain\",\r\n                                    \"/static/img/team/Fountain_Nicole.jpg\",\r\n                                    \"Administrative Assistant\")}\r\n                            </div>\r\n\r\n                            <div className=\"row\">\r\n                                {render_team_member(\"Kidist Adamu\",\r\n                                    \"/static/img/team/Adamu_Kidist.jpg\")}\r\n\r\n                                {render_team_member(\"Ife Ademolu-Odeneye\",\r\n                                    \"/static/img/team/Ademolu-Odeneye_Ife.jpg\")}\r\n\r\n                                {render_team_member(\"Angelica Castillejos\",\r\n                                    \"/static/img/team/Castillejos_Angelica.jpg\")}\r\n\r\n                                {render_team_member('Crista Falk',\r\n                                    \"/static/img/team/Falk_Crista.jpg\")}\r\n\r\n                                {render_team_member('Raquel Garcia',\r\n                                    \"/static/img/team/Garcia_Raquel.jpg\")}\r\n\r\n                                {render_team_member('Christina Wang',\r\n                                    \"/static/img/team/Wang_Mingye.jpg\")}\r\n\r\n                                {render_team_member('Jordan Wilke',\r\n                                    \"/static/img/team/Wilke_Jordan.jpg\")}\r\n\r\n                                {render_team_member('Jessica Wu',\r\n                                    \"/static/img/team/Wu_Jessica.jpg\")}\r\n\r\n                                {render_team_member('Angel Yang',\r\n                                    \"/static/img/team/Yang_Angel.jpg\")}\r\n\r\n                                {render_team_member('Sirena Yu',\r\n                                    \"/static/img/team/Yu_Sirena.jpg\")}\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </>\r\n        );\r\n\r\n\r\n        return (\r\n            <MainLayout content={content}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default AboutView;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap';  // JS import -- just for collapse\r\n\r\nimport MainView from './main/main';\r\n\r\nimport LandingView from \"./main/landing_page\";\r\nimport NetworkExplorationView from \"./main/network_exploration\";\r\nimport SterlingEssayView from \"./main/essay_sterling\";\r\nimport ResearchDirectorsEssayView from \"./main/essay_research_directors\";\r\nimport AboutView from \"./main/team\";\r\n\r\nwindow.app_modules = {\r\n    React,  // Make React accessible from the base template\r\n    ReactDOM,  // Make ReactDOM accessible from the base template\r\n\r\n    // Add all frontend views here\r\n\r\n    LandingView,\r\n    NetworkExplorationView,\r\n\r\n    SterlingEssayView,\r\n    ResearchDirectorsEssayView,\r\n    AboutView,\r\n    MainView,\r\n};\r\n"],"sourceRoot":""}